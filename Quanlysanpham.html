<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>[*Bài tập] Ứng dụng quản lý sản phẩm sử dụng hàm</title>
  </head>
  <body>
    <div>
      <p>Thêm sản phẩm</p>
      <input type="text" id="add" />
      <button onclick="addProduct()">Add</button>
      <p>Display all product</p>
    </div>
    <table id="displayArea" border="1" cellspacing="0">
      <thead></thead>
      <tbody></tbody>
    </table>

    <div id="edit"></div>
    <script>
      let listProduct = ["ip13", "ip12", "samsung", "a10", "nokia 1280"];

      displayAll();

      function displayAll() {
        let str =
          "<tr>\n" +
          "<td>Tên sản phẩm</td>\n  " +
          "<td></td>\n" +
          "<td>" +
          listProduct.length +
          "</td> " +
          "</tr>";

        for (let i = 0; i < listProduct.length; i++) {
          str +=
            "<tr><td>" +
            listProduct[i] +
            "</td>" +
            '<td><button onclick="showFormEdit(' +
            i +
            ')">Edit</button></td>' +
            '<td><button onclick="deleteProduct(' +
            i +
            ')">Delete</button></td></tr>';
        }

        document.getElementById("displayArea").innerHTML = str;
      }

      function addProduct() {
        let productName = document.getElementById("add").value;
        document.getElementById("add").value = "";
        listProduct.push(productName);
        console.log(listProduct);
        displayAll();
      }

      function deleteProduct(inDex) {
        listProduct.splice(inDex, 1);
        displayAll();
      }

      function showFormEdit(inDex) {
        let str = "";
        str =
          '<input type="text" value=" ' +
          listProduct[inDex] +
          ' " id="editProduct"><button onclick="saveProduct(' +
          inDex +
          ')">Save</button>';
        document.getElementById("edit").innerHTML = str;
      }

      function saveProduct(inDex) {
        listProduct[inDex] = document.getElementById("editProduct").value;
        document.getElementById("edit").innerHTML = "";
        displayAll();
      }
    </script>
  </body>
</html>
